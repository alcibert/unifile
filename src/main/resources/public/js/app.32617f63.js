(function(){"use strict";var e={3711:function(e,t,n){var o=n(5130),s=n(6768),l=n(4232);const r={class:"container"},i={class:"row"};function a(e,t,n,o,a,c){const h=(0,s.g2)("VolumeSelector"),d=(0,s.g2)("ConflictList"),u=(0,s.g2)("FileBrowserWindow"),m=(0,s.g2)("MergeStarter");return(0,s.uX)(),(0,s.CE)("div",r,[(0,s.Lk)("button",{class:"btn",onClick:t[0]||(t[0]=e=>c.switchLanguage("de"))},"🇩🇪 Deutsch"),(0,s.Lk)("button",{class:"btn",onClick:t[1]||(t[1]=e=>c.switchLanguage("en"))},"🇬🇧 English"),(0,s.Lk)("h1",null,(0,l.v_)(e.$t("welcome")),1),(0,s.Lk)("div",i,[(0,s.bF)(h,{class:"volSelA col-md-6",volume:"A",onOpenFilebrowser:c.onOpenFilebrowser,onScanned:c.onScanned,selectedPath:a.selectedPaths["A"]},null,8,["onOpenFilebrowser","onScanned","selectedPath"]),(0,s.bF)(h,{class:"volSelB col-md-6",volume:"B",onOpenFilebrowser:c.onOpenFilebrowser,onScanned:c.onScanned,selectedPath:a.selectedPaths["B"]},null,8,["onOpenFilebrowser","onScanned","selectedPath"])]),this.allScanned?((0,s.uX)(),(0,s.Wv)(d,{key:0,class:"conflictList"})):(0,s.Q3)("",!0),(0,s.bF)(u,{onCloseFilebrowser:c.onCloseFilebrowser,onCwdPathUpdate:c.updateCurrentPath,isVisible:a.isOpen},null,8,["onCloseFilebrowser","onCwdPathUpdate","isVisible"]),(0,s.bF)(m)])}const c={class:"volumeSelector"},h={class:"volumeSelect"};function d(e,t,n,o,r,i){return(0,s.uX)(),(0,s.CE)("div",c,[(0,s.Lk)("h2",null,"Volume "+(0,l.v_)(n.volume),1),(0,s.Lk)("span",h,(0,l.v_)(e.$t("selectedPath"))+" "+(0,l.v_)(n.selectedPath),1),(0,s.Lk)("button",{class:"btn volumeSelectBtn",onClick:t[0]||(t[0]=(...e)=>i.volumeClicked&&i.volumeClicked(...e))},(0,l.v_)(e.$t("selectPath")),1)])}var u={name:"VolumeSelector",emits:["openFilebrowser","scanned"],components:{},props:{volume:String,selectedPath:String},data(){return{isScanned:!1}},methods:{volumeClicked(){this.$emit("openFilebrowser",this.volume)},scanContent(){let e=`http://localhost:8080/api/v1.0/directory/scan/${this.volume}?path=${encodeURIComponent(this.selectedPath)}`;fetch(e).then((e=>{200===e.status?(this.isScanned=!0,console.log(`${this.volume} scanned successfully`),this.$emit("scanned",this.volume)):console.warn(`HTTP Response not ok: ${e?.status}`)}))}},watch:{selectedPath(){this.scanContent()}}},m=n(1241);const p=(0,m.A)(u,[["render",d],["__scopeId","data-v-061da86b"]]);var g=p;const f={key:0,class:"filebrowser"};function w(e,t,n,o,l,r){const i=(0,s.g2)("WindowTitle"),a=(0,s.g2)("NavigationBar"),c=(0,s.g2)("FolderContentArea"),h=(0,s.g2)("SelectBar");return n.isVisible?((0,s.uX)(),(0,s.CE)("div",f,[(0,s.bF)(i,{currentFolder:r.curFolder,onCloseFilebrowser:t[0]||(t[0]=t=>e.$emit("closeFilebrowser",e.e))},null,8,["currentFolder"]),(0,s.bF)(a,{cwdPath:l.cwdResponse.absolutePath,currentFolder:r.curFolder,onNewCwd:t[1]||(t[1]=e=>{r.newCWD(e)}),onBack:r.historyBack},null,8,["cwdPath","currentFolder","onBack"]),(0,s.bF)(c,{contentObject:l.cwdResponse,onNewCwd:t[2]||(t[2]=e=>{r.newCWD(e)})},null,8,["contentObject"]),(0,s.bF)(h,{currentPath:l.cwdResponse.absolutePath,onPathSelected:r.onPathSelected},null,8,["currentPath","onPathSelected"])])):(0,s.Q3)("",!0)}n(4114);var v="data:image/png;base64,";const k={class:"titlebar"},b={class:"title"};function C(e,t,n,o,r,i){return(0,s.uX)(),(0,s.CE)("div",k,[t[1]||(t[1]=(0,s.Lk)("img",{src:v,alt:"ICON",class:"favicon"},null,-1)),t[2]||(t[2]=(0,s.Lk)("span",{class:"view"},"Ansicht",-1)),(0,s.Lk)("span",b,(0,l.v_)(n.currentFolder),1),(0,s.Lk)("span",{class:"exp-close",onClick:t[0]||(t[0]=(...e)=>i.closeFilebrowser&&i.closeFilebrowser(...e))},"╳")])}var S={name:"WindowTitle",emits:["closeFilebrowser"],props:{currentFolder:String},methods:{closeFilebrowser(e){this.$emit("closeFilebrowser",e)}}};const L=(0,m.A)(S,[["render",C]]);var P=L;const y={class:"navBar"},F={class:"pathBar"},B={class:"searchBar"},$=["placeholder"];function A(e,t,n,o,r,i){return(0,s.uX)(),(0,s.CE)("div",y,[(0,s.Lk)("span",{class:"back",onClick:t[0]||(t[0]=(...e)=>i.back&&i.back(...e))},"←"),(0,s.Lk)("span",{class:"up",onClick:t[1]||(t[1]=(...e)=>i.up&&i.up(...e))},"↑"),(0,s.Lk)("div",F,[t[2]||(t[2]=(0,s.Lk)("img",{src:v,alt:"ICON",class:"favicon"},null,-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.cwdPathArray,(e=>((0,s.uX)(),(0,s.CE)("span",{key:e,class:"pathObj"},(0,l.v_)(e),1)))),128))]),(0,s.Lk)("div",B,[t[3]||(t[3]=(0,s.Lk)("span",{class:"searchIcon"},"🔎",-1)),(0,s.Lk)("input",{type:"text",id:"searchInput",placeholder:'"'+n.currentFolder+'" durchsuchen'},null,8,$)])])}var T={name:"NavigationBar",emits:["new-cwd","back"],props:{cwdPath:String,currentFolder:String},computed:{cwdPathArray(){return this.cwdPath?.split("\\")}},methods:{up(){let e=[...this.cwdPathArray];if(e.length<=2)return console.warn("Cannot go further up in file tree."),void this.$emit("new-cwd",".");console.log(e),e.pop(),e=e.join("\\"),this.$emit("new-cwd",e+"\\")},back(){this.$emit("back")}}};const O=(0,m.A)(T,[["render",A]]);var E=O;const _={class:"contentScroll"},D={class:"folderContent"};function I(e,t,n,o,l,r){const i=(0,s.g2)("ContentElement");return(0,s.uX)(),(0,s.CE)("div",_,[(0,s.Lk)("div",D,[t[1]||(t[1]=(0,s.Lk)("div",{class:"header"},[(0,s.Lk)("span",null,"Name"),(0,s.Lk)("span",null,"Änderungsdatum"),(0,s.Lk)("span",null,"Typ"),(0,s.Lk)("span",null,"Größe")],-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.contentObject.content,(e=>((0,s.uX)(),(0,s.Wv)(i,{key:e.absolutePath+"\\"+e.name,element:e,onNewCwd:t[0]||(t[0]=e=>r.newCwd(e))},null,8,["element"])))),128))])])}const j={class:"modified"},M={class:"type"},R={class:"size"};function X(e,t,n,o,r,i){return(0,s.uX)(),(0,s.CE)("div",{class:"contentRow",onDblclick:t[0]||(t[0]=e=>i.elementClicked(n.element))},[(0,s.Lk)("span",{class:(0,l.C4)("name "+i.elementClass)},(0,l.v_)(n.element.name),3),(0,s.Lk)("span",j,(0,l.v_)(i.elementModifiedFormated),1),(0,s.Lk)("span",M,(0,l.v_)(i.elementType),1),(0,s.Lk)("span",R,(0,l.v_)(i.elementSizeFormated),1)],32)}var H={emits:["new-cwd"],name:"ContentElement",props:{element:Object},methods:{elementClicked(e){e.isDirectory?this.$emit("new-cwd",e.absolutePath):console.log("file")}},computed:{elementSizeFormated(){let e=parseInt(this.element.size),t="B",n=e;if(e>=1e12)t="TB",n=e/1e12;else if(e>=1e9)t="GB",n=e/1e9;else if(e>=1e6)t="MB",n=e/1e6;else if(e>=1e3)t="KB",n=e/1e3;else if(0==e)return"";return n=new Intl.NumberFormat("de-DE",{maximumSignificantDigits:3}).format(n),`${n} ${t}`},elementModifiedFormated(){if(null==this.element.lastModified)return"";let e=new Date(this.element.lastModified),t=new Date(Date.now());return e.toLocaleDateString()==t.toLocaleDateString()?`${e.toLocaleTimeString()} Uhr`:`${e.toLocaleString()} Uhr`},elementClass(){if(this.element.isDirectory)return"folder";let e=this.element.name.split(".");return e[e.length-1]},elementType(){if(this.element.isDirectory)return"Dateiordner";let e=this.element.name.split(".");return e=e[e.length-1],`.${e} Datei`}}};const W=(0,m.A)(H,[["render",X]]);var N=W,U={name:"FolderContentArea",emits:["new-cwd"],props:{contentObject:Object},components:{ContentElement:N},methods:{newCwd(e){this.$emit("new-cwd",e)}}};const V=(0,m.A)(U,[["render",I]]);var x=V;const z={class:"selectBar"},K={class:"selectBarPath"};function G(e,t,n,o,r,i){return(0,s.uX)(),(0,s.CE)("div",z,[(0,s.Lk)("div",null,[(0,s.eW)((0,l.v_)(e.$t("selectFolder"))+" ",1),(0,s.Lk)("span",K,(0,l.v_)(n.currentPath),1)]),(0,s.Lk)("button",{class:"selectBarBtn",onClick:t[0]||(t[0]=(...e)=>i.pathSelected&&i.pathSelected(...e))},(0,l.v_)(e.$t("selectPath")),1)])}var Q={name:"SelectBar",emits:["pathSelected"],props:{currentPath:String},methods:{pathSelected(){""!=this.currentPath&&this.$emit("pathSelected")}}};const J=(0,m.A)(Q,[["render",G]]);var q=J,Y={name:"FileBrowserWindow",props:{isVisible:Boolean,volume:String},components:{WindowTitle:P,NavigationBar:E,FolderContentArea:x,SelectBar:q},computed:{curFolder(){return this.cwdResponse.name}},data(){return{cwdResponse:{error:!0,absolutePath:""},cwd:".",search:"",cwdHistory:["."]}},methods:{fetchData(){let e=`http://localhost:8080/api/v1.0/directory/explore?cwd=${encodeURIComponent(this.cwd)}`;fetch(e).then((e=>{if(e?.ok)return e.json();console.warn(`HTTP Response not ok: ${e?.status}`)})).then((e=>{this.cwdResponse=e})).catch((e=>{console.log("Something went wrong while calling the API",e)}))},newCWD(e){this.cwd=e,this.cwdHistory.push(e),this.fetchData()},historyBack(){this.cwdHistory.length<=1?console.warn("Cannot go back in History any further."):(this.cwdHistory.pop(),this.cwd=this.cwdHistory[this.cwdHistory.length-1],this.fetchData())},onPathSelected(){this.$emit("cwdPathUpdate",this.cwdResponse.absolutePath),this.$emit("closeFilebrowser")}},mounted(){this.fetchData()},emits:["closeFilebrowser","cwdPathUpdate"]};const Z=(0,m.A)(Y,[["render",w]]);var ee=Z;const te={class:"contentList"},ne={key:0};function oe(e,t,n,o,l,r){const i=(0,s.g2)("ConflictListElement");return(0,s.uX)(),(0,s.CE)("div",te,[t[0]||(t[0]=(0,s.Lk)("p",null,"Inhalt",-1)),r.hasConflicts?((0,s.uX)(),(0,s.CE)("div",ne,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.conflicts,(e=>((0,s.uX)(),(0,s.Wv)(i,{key:e.id,element:e,onMergeChanged:r.changeMerge},null,8,["element","onMergeChanged"])))),128))])):(0,s.Q3)("",!0)])}const se={class:"conflictChoiceSelector"};function le(e,t,n,o,r,i){return(0,s.uX)(),(0,s.CE)("div",{class:(0,l.C4)(["conflictListElement",[n.element.merge]])},[(0,s.Lk)("span",{title:"Open in File Explorer",onClick:t[0]||(t[0]=e=>i.openHost(n.element.fileA))},(0,l.v_)(n.element.fileA.name),1),(0,s.Lk)("span",null,(0,l.v_)(i.getSize(n.element.fileA.size)),1),(0,s.Lk)("span",null,(0,l.v_)(i.getTimestamp(n.element.fileA.lastModified)),1),(0,s.Lk)("div",se,[(0,s.Lk)("button",{class:"btn",onClick:t[1]||(t[1]=(...e)=>i.setTakeA&&i.setTakeA(...e))},(0,l.v_)(i.takeA),1),(0,s.Lk)("button",{class:"btn",onClick:t[2]||(t[2]=(...e)=>i.setIgnore&&i.setIgnore(...e))},(0,l.v_)(i.ignore),1),(0,s.Lk)("button",{class:"btn",onClick:t[3]||(t[3]=(...e)=>i.setTakeB&&i.setTakeB(...e))},(0,l.v_)(i.takeB),1)]),(0,s.Lk)("span",{title:"Open in File Explorer",onClick:t[4]||(t[4]=e=>i.openHost(n.element.fileA))},(0,l.v_)(n.element.fileB.name),1),(0,s.Lk)("span",null,(0,l.v_)(i.getSize(n.element.fileB.size)),1),(0,s.Lk)("span",null,(0,l.v_)(i.getTimestamp(n.element.fileB.lastModified)),1)],2)}var re={name:"ConflictListElement",emits:["mergeChanged"],props:{element:{}},data(){return{}},mounted(){console.log("ConflictListElement mounted")},methods:{setTakeA(){let e=`http://localhost:8080/api/v1.0/conflict/${this.element.id}/setMergeStrategy`;fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:1}).then((e=>{if(e?.ok)return e.json();console.warn(`HTTP Response not ok: ${e?.status}`)})).then((e=>{this.$emit("mergeChanged",[this.element,e])})).catch((e=>{console.log("Something went wrong while calling the API",e)}))},setTakeB(){let e=`http://localhost:8080/api/v1.0/conflict/${this.element.id}/setMergeStrategy`;fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:2}).then((e=>{if(e?.ok)return e.json();console.warn(`HTTP Response not ok: ${e?.status}`)})).then((e=>{this.$emit("mergeChanged",[this.element,e])})).catch((e=>{console.log("Something went wrong while calling the API",e)}))},setIgnore(){let e=`http://localhost:8080/api/v1.0/conflict/${this.element.id}/setMergeStrategy`;fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:3}).then((e=>{if(e?.ok)return e.json();console.warn(`HTTP Response not ok: ${e?.status}`)})).then((e=>{this.$emit("mergeChanged",[this.element,e])})).catch((e=>{console.log("Something went wrong while calling the API",e)}))},getTimestamp(e){let t=new Date(e),n=new Date(Date.now());return t.toLocaleDateString()==n.toLocaleDateString()?`${t.toLocaleTimeString()} Uhr`:`${t.toLocaleString()} Uhr`},getSize(e){let t=parseInt(e),n="B",o=t;if(t>=1e12)n="TB",o=t/1e12;else if(t>=1e9)n="GB",o=t/1e9;else if(t>=1e6)n="MB",o=t/1e6;else if(t>=1e3)n="KB",o=t/1e3;else if(0==t)return"";return o=new Intl.NumberFormat("de-DE",{maximumSignificantDigits:3}).format(o),`${o} ${n}`},openHost(e){let t=e.absolutePath.split(e.name)[0],n=`http://localhost:8080/api/v1.0/directory/openHostSystem?path=${encodeURIComponent(t)}`;fetch(n)}},computed:{takeA(){let e="KEEP_A"==this.element.merge?"✔":"";return e+" "+this.$i18n.t("takeA")},takeB(){let e="KEEP_B"==this.element.merge?"✔":"";return e+" "+this.$i18n.t("takeB")},ignore(){let e="IGNORE"==this.element.merge?"✔":"";return e+" "+this.$i18n.t("ignore")}}};const ie=(0,m.A)(re,[["render",le],["__scopeId","data-v-3bb8ed3d"]]);var ae=ie,ce={name:"ConflictList",components:{ConflictListElement:ae},props:{allScanned:Boolean},computed:{hasConflicts(){return this.conflicts.length>0}},data(){return{conflicts:[]}},mounted(){this.fetchContent()},methods:{fetchContent(){let e="http://localhost:8080/api/v1.0/conflict/analyze";fetch(e).then((e=>e.json())).then((e=>{this.conflicts=e,console.log("fetched Conflict List"),console.log(this.conflicts)}))},changeMerge(e){e[0].merge=e[1]}}};const he=(0,m.A)(ce,[["render",oe]]);var de=he;const ue={class:"mergeStarter"};function me(e,t,n,o,r,i){return(0,s.uX)(),(0,s.CE)("div",ue,[(0,s.Lk)("button",{class:"btn",onClick:t[0]||(t[0]=e=>i.mergeFromTo("b","a"))},(0,l.v_)(e.$t("mergeToA")),1),(0,s.Lk)("button",{class:"btn",onClick:t[1]||(t[1]=e=>i.sync())},(0,l.v_)(e.$t("sync")),1),(0,s.Lk)("button",{class:"btn",onClick:t[2]||(t[2]=e=>i.mergeFromTo("a","b"))},(0,l.v_)(e.$t("mergeToB")),1)])}var pe={name:"MergeStarter",components:{},props:{},data(){},methods:{mergeFromTo(e,t){let n=`http://localhost:8080/api/v1.0/directory/copy/${e.toLowerCase()}/${t.toLowerCase()}`;fetch(n).then((e=>{200===e.status?console.log("Done copying"):console.warn(`HTTP Response not ok: ${e?.status}`)}))},sync(){let e="http://localhost:8080/api/v1.0/directory/copy/a/b}";fetch(e).then((t=>{200===t.status?(e="http://localhost:8080/api/v1.0/directory/copy/b/a}",fetch(e)):console.warn(`HTTP Response not ok: ${t?.status}`)}))}}};const ge=(0,m.A)(pe,[["render",me],["__scopeId","data-v-ad31cf48"]]);var fe=ge,we={name:"App",components:{ConflictList:de,VolumeSelector:g,FileBrowserWindow:ee,MergeStarter:fe},data(){return{isOpen:!1,currentVolume:"",volume:String,selectedPaths:{},isScannedA:!1,isScannedB:!1,allScanned:!1}},methods:{updateCurrentPath(e){this.selectedPaths={...this.selectedPaths,[this.currentVolume]:e}},onOpenFilebrowser(e){this.isOpen=!0,console.log("Volume= "+e),this.currentVolume=e},onCloseFilebrowser(){this.isOpen=!1},switchLanguage(e){this.$i18n.locale=e,localStorage.setItem("lang",e)},onScanned(e){"A"==e?this.isScannedA=!0:"B"==e&&(this.isScannedB=!0),this.isScannedA&&1==this.isScannedB&&(this.allScanned=!0)}}};const ve=(0,m.A)(we,[["render",a]]);var ke=ve,be=n(5931),Ce=JSON.parse('{"welcome":"Welcome to Unifile","selectPath":"select path","selectedPath":"selected path: ","selectFolder":"Select Directory","takeA":"Keep left","takeB":"Keep right","ignore":"ignore","mergeToA":"Merge everything to A","mergeToB":"Merge everything to B","sync":"Synchonize both Volumes"}'),Se=JSON.parse('{"welcome":"Willkommen bei Unifile","selectPath":"Pfad auswählen","selectedPath":"ausgewählter Pfad: ","selectFolder":"Ordner wählen","takeA":"Links behalten","takeB":"Rechts behalten","ignore":"Ingnorieren","mergeToA":"Alles in A vereinen","mergeToB":"Alles in B vereinen","sync":"Beide Volumen synchonisieren"}');const Le=(0,be.hU)({locale:localStorage.getItem("lang")||"de",fallbackLocale:"en",messages:{en:Ce,de:Se}});var Pe=Le;const ye=(0,o.Ef)(ke);ye.use(Pe),ye.mount("#app")}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var l=t[o]={exports:{}};return e[o].call(l.exports,l,l.exports,n),l.exports}n.m=e,function(){var e=[];n.O=function(t,o,s,l){if(!o){var r=1/0;for(h=0;h<e.length;h++){o=e[h][0],s=e[h][1],l=e[h][2];for(var i=!0,a=0;a<o.length;a++)(!1&l||r>=l)&&Object.keys(n.O).every((function(e){return n.O[e](o[a])}))?o.splice(a--,1):(i=!1,l<r&&(r=l));if(i){e.splice(h--,1);var c=s();void 0!==c&&(t=c)}}return t}l=l||0;for(var h=e.length;h>0&&e[h-1][2]>l;h--)e[h]=e[h-1];e[h]=[o,s,l]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var s,l,r=o[0],i=o[1],a=o[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(s in i)n.o(i,s)&&(n.m[s]=i[s]);if(a)var h=a(n)}for(t&&t(o);c<r.length;c++)l=r[c],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(h)},o=self["webpackChunkunifile"]=self["webpackChunkunifile"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(3711)}));o=n.O(o)})();
//# sourceMappingURL=app.32617f63.js.map